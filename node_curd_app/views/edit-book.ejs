<%- include('layout/header') %>
<div class="container">
    <div class="row">
        <div class="col-lg-6 mx-auto mt-4">
            <div class="card shadow">
                <div class="card-header bg-success">
                    <h3 class="text-light">Edit Book: <%= book.name %></h3>
                </div>
                <div class="card-body p-4">
                    <form action="/update-book/<%= book._id %>" method="POST" id="edit-form"> <!-- Corrected typo here -->

                        <div class="mb-3">
                            <label for="name">Name</label>
                            <input type="text" name="name" class="form-control form-control-lg"
                                placeholder="Enter name" value="<%= book.name %>" required>
                        </div>

                        <div class="mb-3">
                            <label for="total_pages">Total Pages</label>
                            <input type="text" name="total_pages" class="form-control form-control-lg"
                                placeholder="Enter total pages" value="<%= book.total_pages %>" required>
                        </div>


                        <div class="mb-3">
                            <label for="author">Author</label>
                            <select class="form-control form-control-lg" name="author" id="author">
                                <option value="">Select an option</option>
                                <% authors.forEach(author => { %>
                                    <% if (book.author && author._id.toString() === book.author._id.toString()) { %>
                                        <option value="<%= author._id %>" selected><%= author.name %></option>
                                    <% } else { %>
                                        <option value="<%= author._id %>"><%= author.name %></option>
                                    <% } %>
                                <% }); %>
                            </select>
                        </div>
                                                

                        <div class="mb-3">
                            <label for="publish">Publish</label>
                            <select class="form-control form-control-lg" name="publish" id="publish">
                                <option value="">Select an option</option>
                                <% publishers.forEach(publish => { %>
                                        <% if (book.publish && publish._id.toString() === book.publish._id.toString()) { %>
                                            <option value="<%= publish._id %>" selected><%= publish.name %></option>
                                        <% } else { %>
                                            <option value="<%= publish._id %>"><%= publish.name %></option>
                                        <% } %>
    
                                    <option value="<%= publish._id %>"><%= publish.name %></option> 
                                <% }); %>
                            </select>
                        </div>
                                                
                        <div class="mb-3">
                            <label for="price">Price</label>
                            <input type="text" name="price" class="form-control form-control-lg"
                                placeholder="Enter price" value="<%= book.price %>" required>
                        </div>

                        <div class="mb-3 d-grid">
                            <input type="submit" name="submit" value="Update Book" class="btn btn-success btn-lg">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<%- include('layout/footer') %>
